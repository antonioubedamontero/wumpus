"use strict";(self.webpackChunkwumpus=self.webpackChunkwumpus||[]).push([[335],{9335:(I,h,s)=>{s.r(h),s.d(h,{GamePageModule:()=>B});var c=s(6895),d=s(7493),t=s(4650);let f=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez]}),o})(),_=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,d.Y,f]}),o})();var m=s(3456),g=s(5412),u=s(4859),l=s(1576);function w(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"p"),t._uU(2),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.closeDialog())}),t._uU(4," Volver a Jugar "),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.message)}}let x=(()=>{class o{constructor(e,n){this.dialogRef=e,this.data=n,this.message=""}ngOnInit(){this.message=this.data.message,setTimeout(()=>this.closeDialog(),3e3)}closeDialog(){this.dialogRef.close()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.so),t.Y36(g.WI))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-finish-modal"]],decls:1,vars:1,consts:[["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px",4,"ngIf"],["fxLayout","column","fxLayoutAlign","center center","fxLayoutGap","20px"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,n){1&e&&t.YNc(0,w,5,1,"div",0),2&e&&t.Q6J("ngIf",n.message)},dependencies:[c.O5,u.lW,l.xw,l.SQ,l.Wh]}),o})();var p=s(1397),A=s(5829);function C(o,i){1&o&&t._UZ(0,"img",11)}function v(o,i){1&o&&t._UZ(0,"img",12)}const y=function(o){return{rotate:o}};function M(o,i){if(1&o&&t._UZ(0,"img",13),2&o){const e=t.oxw(4);t.Q6J("ngStyle",t.VKq(1,y,e.getDegrees()+"deg"))}}function T(o,i){1&o&&t._UZ(0,"img",14)}function b(o,i){1&o&&t._UZ(0,"img",15)}function O(o,i){if(1&o&&(t.TgZ(0,"td",4)(1,"div",5),t.YNc(2,C,1,0,"img",6),t.YNc(3,v,1,0,"img",7),t.YNc(4,M,1,3,"img",8),t.YNc(5,T,1,0,"img",9),t.YNc(6,b,1,0,"img",10),t.qZA()()),2&o){const e=i.$implicit,n=i.index,a=t.oxw().index,r=t.oxw(2);t.xp6(2),t.Q6J("ngIf",r.showMonster(e,a,n)),t.xp6(1),t.Q6J("ngIf",r.showWell(e,a,n)),t.xp6(1),t.Q6J("ngIf",r.showHero(e)),t.xp6(1),t.Q6J("ngIf",r.showGold(e,a,n)),t.xp6(1),t.Q6J("ngIf",r.showFootPrint(e))}}function Z(o,i){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,O,7,5,"td",3),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("ngForOf",e)}}function E(o,i){if(1&o&&(t.TgZ(0,"div",1)(1,"table"),t.YNc(2,Z,2,1,"tr",2),t.qZA()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("ngForOf",e.board)}}let P=(()=>{class o{constructor(e){this.gameService=e,this.showAllValue=!1,this.board=[]}ngOnInit(){this.board=this.gameService.getBoard()}showMonster(e,n,a){return"monster"===e.enemies?.type&&(this.showAllValue||!e.enemies.isAlive||this.hero.row===n&&this.hero.col===a)}showWell(e,n,a){return"well"===e.enemies?.type&&(this.showAllValue||this.hero.row===n&&this.hero.col===a)}showGold(e,n,a){return e.hasGold&&(this.showAllValue||this.hero.hasGold||this.hero.row===n&&this.hero.col===a)}showHero(e){return e.hasHero}showFootPrint(e){return e.hasBeenVisited&&!(e.enemies||e.hasHero||e.hasGold)}getDegrees(){switch(this.hero.orientation){case"N":case"None":return-90;case"S":return 90;case"E":return 0;case"W":return 180;default:throw Error("Missing orientation")}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.h))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-board"]],inputs:{showAllValue:"showAllValue",hero:"hero"},decls:1,vars:1,consts:[["class","board","fxLayout","row","fxLayoutAlign","center center",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center",1,"board"],[4,"ngFor","ngForOf"],["class","image-container",4,"ngFor","ngForOf"],[1,"image-container"],["fxLayout","column","fxLayoutAlign","center center"],["class","image","src","assets/images/monster.jpg","alt","moster",4,"ngIf"],["class","image","src","assets/images/well.jpg","alt","well",4,"ngIf"],["class","image image-hero","src","assets/images/archer.svg","alt","hero",3,"ngStyle",4,"ngIf"],["class","image","src","assets/images/gold.jpg","alt","gold",4,"ngIf"],["class","image image-footprint","src","assets/images/footprint.jpg","alt","footprint",4,"ngIf"],["src","assets/images/monster.jpg","alt","moster",1,"image"],["src","assets/images/well.jpg","alt","well",1,"image"],["src","assets/images/archer.svg","alt","hero",1,"image","image-hero",3,"ngStyle"],["src","assets/images/gold.jpg","alt","gold",1,"image"],["src","assets/images/footprint.jpg","alt","footprint",1,"image","image-footprint"]],template:function(e,n){1&e&&t.YNc(0,E,3,1,"div",0),2&e&&t.Q6J("ngIf",n.board.length>0)},dependencies:[c.sg,c.O5,c.PC,l.xw,l.Wh,A.Zl],styles:["table[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid black;border-collapse:collapse}td[_ngcontent-%COMP%]{width:50px;height:50px}.image[_ngcontent-%COMP%]{width:40px;height:40px}.image-container[_ngcontent-%COMP%]{position:relative;padding:auto}.image-hero[_ngcontent-%COMP%]{position:absolute}.image-footprint[_ngcontent-%COMP%]{max-width:25px;max-height:25px}"]}),o})();var G=s(3336),N=s(3683),F=s(266);let J=(()=>{class o{constructor(){this.canExitEnter=!1,this.currentDirection="None",this.numOfHarrows=5,this.showAllValue=!1,this.movementResponseEmmited=new t.vpe,this.showAllChange=new t.vpe}doAction(e){["throwArrow","goForward"].includes(e)?this.movementResponseEmmited.emit({orientation:this.currentDirection,additionalAction:e}):"exitEnter"!==e?this.manageTurns(e):this.movementResponseEmmited.emit({orientation:"None"==this.currentDirection?"N":"S",additionalAction:"exitEnter"})}manageTurns(e){const n=["N","E","S","W"],a=n.findIndex(r=>r===this.currentDirection);"turnRight"!==e?"turnLeft"===e&&this.movementResponseEmmited.emit({orientation:0===a?"W":n[a-1]}):this.movementResponseEmmited.emit({orientation:a===n.length-1?"N":n[a+1]})}toggleShow(){this.showAllValue=!this.showAllValue,this.showAllChange.emit(this.showAllValue)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-controls"]],inputs:{canExitEnter:"canExitEnter",currentDirection:"currentDirection",numOfHarrows:"numOfHarrows",showAllValue:"showAllValue"},outputs:{movementResponseEmmited:"movementResponseEmmited",showAllChange:"showAllChange"},decls:24,vars:4,consts:[["fxLayout","row","fxLayoutAlign","center center","fxLayoutGap","10px"],["fxLayout","row","fxLayoutAlign","start center","fxLayoutGap","10px",1,"border-right"],["mat-button","","color","primary",3,"click"],[3,"matTooltip"],["mat-icon-button",""],["matTooltip","Lanzar flecha",3,"click"],["mat-icon-button","",3,"disabled"],["matTooltip","Salir / Entrar",3,"click"],["matTooltip","Girar a la izquierda",3,"click"],["matTooltip","Avanzar",3,"click"],["matTooltip","Girar a la derecha",3,"click"],[1,"num-of-harrows-bar"],["matTooltip","N\xfamero de flechas"]],template:function(e,n){1&e&&(t.TgZ(0,"mat-toolbar",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return n.toggleShow()}),t.TgZ(3,"mat-icon",3),t._uU(4),t.qZA()()(),t.TgZ(5,"button",4)(6,"mat-icon",5),t.NdJ("click",function(){return n.doAction("throwArrow")}),t._uU(7," sports_martial_arts "),t.qZA()(),t.TgZ(8,"button",6)(9,"mat-icon",7),t.NdJ("click",function(){return n.doAction("exitEnter")}),t._uU(10," logout "),t.qZA()(),t.TgZ(11,"button",4)(12,"mat-icon",8),t.NdJ("click",function(){return n.doAction("turnLeft")}),t._uU(13," turn_left "),t.qZA()(),t.TgZ(14,"button",4)(15,"mat-icon",9),t.NdJ("click",function(){return n.doAction("goForward")}),t._uU(16," straight "),t.qZA()(),t.TgZ(17,"button",4)(18,"mat-icon",10),t.NdJ("click",function(){return n.doAction("turnRight")}),t._uU(19," turn_right "),t.qZA()(),t.TgZ(20,"div",11)(21,"mat-icon",12),t._uU(22," rocket "),t.qZA(),t._uU(23),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("matTooltip",n.showAllValue?"Ocultar":"Mostrar"),t.xp6(1),t.hij(" ",n.showAllValue?"visibility":"visibility_off"," "),t.xp6(4),t.Q6J("disabled",!n.canExitEnter),t.xp6(15),t.hij(" ",n.numOfHarrows," "))},dependencies:[u.lW,G.Hw,N.Ye,F.gM,l.xw,l.SQ,l.Wh],styles:[".border-right[_ngcontent-%COMP%]{padding-right:10px;border-right:1px solid gray}.num-of-harrows-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding-left:10px;border-left:1px solid gray}"]}),o})();function k(o,i){if(1&o&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.xp6(1),t.hij(" ",e," ")}}function S(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",1),t._UZ(2,"app-board",2),t.qZA(),t.TgZ(3,"div",3)(4,"div",4),t.YNc(5,k,2,1,"p",5),t.qZA(),t.TgZ(6,"app-controls",6),t.NdJ("movementResponseEmmited",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.receiveMovement(a))})("showAllChange",function(a){t.CHM(e);const r=t.oxw();return t.KtG(r.changeShowAll(a))}),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("showAllValue",e.showAllValue)("hero",e.hero),t.xp6(3),t.Q6J("ngForOf",e.feedbackMessages),t.xp6(1),t.Q6J("currentDirection",e.hero.orientation)("canExitEnter",e.canExitEnter)("showAllValue",e.showAllValue)("numOfHarrows",e.hero.numOfHarrows)}}const H=[{path:"",component:(()=>{class o{constructor(e,n,a){this.gameService=e,this.dialog=n,this.router=a,this.feedbackMessages=[],this.showAllValue=!1}ngOnInit(){this.hero={orientation:"None",hasGold:!1,row:-1,col:-1,numOfHarrows:this.gameService.numOfHarrows}}receiveMovement(e){if("None"!==this.hero.orientation||"exitEnter"===e.additionalAction){if("exitEnter"===e.additionalAction&&"None"===this.hero.orientation)return void(this.hero=this.gameService.getHeroIntoBoard(this.hero));if("exitEnter"===e.additionalAction&&this.hero.hasGold)return this.hero=this.gameService.getHeroOutOfBoard(this.hero),void this.openDialog("\xa1Has ganado!: Conseguiste el oro y saliste con vida");if(!e.additionalAction)return this.hero.orientation=e.orientation,void(this.feedbackMessages=[]);if("goForward"===e.additionalAction){const{hero:n,feedbackMessages:a,isHeroAlive:r}=this.gameService.advanceHeroInBoard(this.hero);return this.hero=n,this.feedbackMessages=a,void(r||this.openDialog("\xa1Has muerto! Te han cogido tus enemigos"))}if("throwArrow"===e.additionalAction&&0===this.hero.numOfHarrows)return void(this.feedbackMessages=["No puedes lanzar flechas. No tienes flechas"]);if("throwArrow"===e.additionalAction&&!this.gameService.isWumpusAlive())return void(this.feedbackMessages=["No es necesario atacar. El Wumpus ya est\xe1 muerto"]);if("throwArrow"===e.additionalAction){const n=this.gameService.heroAttacks(this.hero,e.orientation);this.feedbackMessages=n,this.hero.numOfHarrows=this.hero.numOfHarrows-1}}}openDialog(e){this.dialog.open(x,{data:{message:e}}).afterClosed().subscribe(()=>{this.router.navigateByUrl("/config")})}get canExitEnter(){return-1===this.hero.row&&-1===this.hero.col||this.hero.hasGold&&this.hero.row===this.gameService.size-1&&0===this.hero.col}changeShowAll(e){this.showAllValue=e}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.h),t.Y36(g.uw),t.Y36(m.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-game-page"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"board"],[3,"showAllValue","hero"],[1,"controls-container"],["fxLayout","column","fxLayoutAlign","center center",1,"feedback-message"],[4,"ngFor","ngForOf"],[3,"currentDirection","canExitEnter","showAllValue","numOfHarrows","movementResponseEmmited","showAllChange"]],template:function(e,n){1&e&&t.YNc(0,S,7,7,"div",0),2&e&&t.Q6J("ngIf",n.hero)},dependencies:[l.xw,l.Wh,c.sg,c.O5,P,J],styles:[".board[_ngcontent-%COMP%]{padding-top:40px}.feedback-message[_ngcontent-%COMP%]{height:80px;background-color:#ffffe6;border:1px solid #d9d9d9;text-align:center}.feedback-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.controls-container[_ngcontent-%COMP%]{margin-top:20px;position:absolute;width:100%;bottom:0;left:0}"]}),o})()}];let V=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(H),m.Bz]}),o})(),B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Y,c.ez,_,V]}),o})()}}]);